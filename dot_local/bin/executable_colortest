#!/usr/bin/env ruby
# Ported to Ruby from Python
# Original Python version from http://www.vim.org/scripts/script.php?script_id=1349
# from https://gist.github.com/921334

colored = [0] + (0..4).map { |n| 0x5f + 40 * n }
colored_palette = colored.product(colored, colored).map do |r, g, b|
  "%02x/%02x/%02x" % [r, g, b]
end

grayscale = (0..23).map { |n| 0x08 + 10 * n }
grayscale_palette = grayscale.map do |a|
  "%02x/%02x/%02x" % [a, a, a]
end

normal = "\033[38;5;%sm"
bold = "\033[1;38;5;%sm"
reset = "\033[0m"

(colored_palette + grayscale_palette).each_with_index do |color, idx|
  i = idx + 16
  index = (bold + "%4s" + reset) % [i, "#{i}:"]
  hex   = (normal + "%s" + reset) % [i, color]
  newline = i % 6 == 3 ? "\n" : ''
  print "#{index} #{hex}#{newline}"
end
